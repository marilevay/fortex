<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>ForTex Demo – Quill Editor</title>
  <link rel="icon" href="../fortex-icon.png" type="image/png" />
  <link rel="apple-touch-icon" href="../fortex-icon.png" />
  <!-- Quill CSS from CDN -->
  <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet" />
  <link rel="stylesheet" href="../styles/demo.css" />
  <!-- KaTeX for rendering formulas in the demo environment -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>
  <script>
    // Fallback: if KaTeX fails to load from CDN, provide a minimal stub so
    // Quill's formula module can call katex.render without throwing.
    if (typeof window.katex === 'undefined') {
      window.katex = {
        render: function(tex, el) {
          if (!el) return;
          // Simple fallback: show the raw LaTeX in the element.
          el.textContent = tex || '';
        }
      };
    }
  </script>
</head>
<body>
  <div class="page">
    <div class="card">
      <div class="header">
        <img class="logo" src="../fortex-icon.png" alt="ForTex" />
        <h1>ForTex Demo – Quill Editor</h1>
      </div>
      <p>This is a plain Quill editor so you can test the ForTex formula button. The size of the tooltip is flexible for multi-line equations.</p>

      <div class="quill">
        <div id="editor"></div>
      </div>
    </div>
  </div>

  <!-- Quill JS from CDN (loaded after KaTeX so the formula module sees `katex`) -->
  <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
  <script>
    (function () {
      if (!window.Quill) return;

      // Initialize a basic Quill editor with a toolbar so ForTex can attach its formula button
      const toolbarOptions = [
        ['bold', 'italic', 'underline'],
        ['link'],
        [{ 'list': 'ordered' }, { 'list': 'bullet' }]
      ];

      const quill = new window.Quill('#editor', {
        modules: {
          toolbar: toolbarOptions,
        },
        theme: 'snow',
      });
    }());
  </script>

  <!-- Load ForTex directly for the public demo (no extension required) -->
  <script src="../quillOverride.js"></script>
</body>
</html>